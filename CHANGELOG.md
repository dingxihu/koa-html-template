# æ›´æ–°æ—¥å¿—

## [2.0.0] - 2024-07-19

### ğŸ†• é‡å¤§æ›´æ–° - Monorepo æ¶æ„

#### âœ¨ æ–°å¢åŠŸèƒ½

**Monorepo æ¶æ„**
- ğŸ—ï¸ é‡‡ç”¨ npm workspaces çš„ monorepo ç»“æ„
- ğŸ“¦ æ‹†åˆ†ä¸º 5 ä¸ªç‹¬ç«‹çš„åŒ…ï¼šcoreã€serverã€clientã€sharedã€docs
- ğŸ”§ ç»Ÿä¸€çš„æ„å»ºã€æµ‹è¯•å’Œå‘å¸ƒæµç¨‹
- ğŸ“ˆ æ”¯æŒå¢é‡æ„å»ºå’Œå¹¶è¡Œå¼€å‘

**æ•°æ®åº“é›†æˆ**
- ğŸ˜ PostgreSQL æ•°æ®åº“æ”¯æŒ
- ğŸ“Š å®Œæ•´çš„æ•°æ®åº“è¿ç§»ç³»ç»Ÿ
- ğŸ—„ï¸ æ¨¡æ¿å­˜å‚¨å’Œç®¡ç†
- ğŸ“ˆ æ¨¡æ¿æ¸²æŸ“å†å²è®°å½•
- ğŸ” æ•°æ®åº“ç»Ÿè®¡å’Œç›‘æ§

**æ•°æ®åº“ç®¡ç†å·¥å…·**
- ğŸ” äº¤äº’å¼å¯†ç è®¾ç½®å·¥å…· (`npm run db:password`)
- ğŸ”Œ æ•°æ®åº“è¿æ¥ç®¡ç†å·¥å…· (`npm run db:disconnect`)
- ğŸ˜ PostgreSQL æœåŠ¡ç®¡ç†å·¥å…· (`npm run db:service`)
- ğŸ§ª æ•°æ®åº“è¿æ¥æµ‹è¯•å·¥å…· (`npm run db:test`)
- ğŸ—ï¸ ä¸€é”®æ•°æ®åº“è®¾ç½® (`npm run db:setup`)

**RESTful API**
- ğŸŒ å®Œæ•´çš„æ¨¡æ¿ç®¡ç† API
- ğŸ”„ æ¨¡æ¿æ¸²æŸ“æœåŠ¡
- ğŸ“Š æ¸²æŸ“å†å²æŸ¥è¯¢
- ğŸ“ˆ ç»Ÿè®¡ä¿¡æ¯æ¥å£
- â¤ï¸ å¥åº·æ£€æŸ¥ç«¯ç‚¹

**æ¨¡æ¿è¯­æ³•å¢å¼º**
- âœ… æ”¯æŒæ¡ä»¶æ¸²æŸ“ (`{if condition}...{/if}`)
- ğŸ”„ æ”¯æŒå¾ªç¯æ¸²æŸ“ (`{for array}...{/for}`)
- ğŸ“ æ”¯æŒæ–‡ä»¶åŒ…å« (`{-include "file.html"}`)
- ğŸ’¬ æ”¯æŒæ¨¡æ¿æ³¨é‡Š (`{# comment #}`)
- ğŸ›¡ï¸ HTML è‡ªåŠ¨è½¬ä¹‰å’ŒåŸå§‹è¾“å‡º

**TypeScript å®Œå…¨æ”¯æŒ**
- ğŸ“ æ‰€æœ‰åŒ…éƒ½æœ‰å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- ğŸ”’ ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥
- ğŸ§© é¡¹ç›®å¼•ç”¨å’Œè·¯å¾„æ˜ å°„
- ğŸ“š ç±»å‹å®‰å…¨çš„ API æ¥å£

**å¼€å‘å·¥å…·å¢å¼º**
- ğŸ“– VitePress æ–‡æ¡£ç«™ç‚¹
- ğŸ§ª Jest æµ‹è¯•æ¡†æ¶
- ğŸ” ESLint + Prettier ä»£ç è´¨é‡
- ğŸ”„ Changesets ç‰ˆæœ¬ç®¡ç†
- ğŸ¤– GitHub Actions CI/CD

#### ğŸ› ä¿®å¤é—®é¢˜

**æ„å»ºç³»ç»Ÿ**
- âœ… ä¿®å¤ Rollup ESM/CommonJS å…¼å®¹æ€§é—®é¢˜
- âœ… ä¿®å¤ workspace ä¾èµ–è§£æé—®é¢˜
- âœ… ä¿®å¤ TypeScript é¡¹ç›®å¼•ç”¨é…ç½®
- âœ… ä¿®å¤ VitePress ESM æ¨¡å—åŠ è½½é—®é¢˜

**ç±»å‹å®‰å…¨**
- âœ… ä¿®å¤æ ¸å¿ƒåŒ…ä¸­çš„ TypeScript ä¸¥æ ¼æ£€æŸ¥é”™è¯¯
- âœ… ä¿®å¤å¯é€‰å±æ€§ç±»å‹é—®é¢˜
- âœ… ä¿®å¤æ¨¡æ¿å¼•æ“ä¸­çš„ç©ºå€¼æ£€æŸ¥
- âœ… ä¿®å¤æœåŠ¡å™¨åŒ…ä¸­çš„ç±»å‹ä¾èµ–é—®é¢˜

**æ•°æ®åº“è¿æ¥**
- âœ… ä¿®å¤ç¯å¢ƒå˜é‡åŠ è½½é—®é¢˜
- âœ… ä¿®å¤æ•°æ®åº“å‘½ä»¤æ‰§è¡Œé”™è¯¯
- âœ… ä¿®å¤è¿æ¥è¶…æ—¶å’Œé”™è¯¯å¤„ç†
- âœ… ä¿®å¤å¯†ç å®‰å…¨å­˜å‚¨

#### ğŸ”„ é‡æ„æ”¹è¿›

**ä»£ç ç»“æ„**
- ğŸ—ï¸ é‡æ„ä¸ºæ¨¡å—åŒ–çš„ monorepo æ¶æ„
- ğŸ“¦ åˆ†ç¦»æ ¸å¿ƒé€»è¾‘å’Œåº”ç”¨é€»è¾‘
- ğŸ”§ ç»Ÿä¸€çš„æ„å»ºå’Œæµ‹è¯•é…ç½®
- ğŸ“ æ”¹è¿›çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

**æ€§èƒ½ä¼˜åŒ–**
- âš¡ æ”¹è¿›çš„æ¨¡æ¿ç¼“å­˜æœºåˆ¶
- ğŸ—„ï¸ é«˜æ•ˆçš„æ•°æ®åº“è¿æ¥æ± 
- ğŸ“ˆ æ¸²æŸ“æ€§èƒ½ç»Ÿè®¡
- ğŸ”„ å¹¶è¡Œæ„å»ºæ”¯æŒ

**å¼€å‘ä½“éªŒ**
- ğŸ› ï¸ å®Œæ•´çš„å¼€å‘å·¥å…·é“¾
- ğŸ“š è¯¦ç»†çš„æ–‡æ¡£å’Œç¤ºä¾‹
- ğŸ§ª å…¨é¢çš„æµ‹è¯•è¦†ç›–
- ğŸ”§ ä¸°å¯Œçš„è°ƒè¯•å·¥å…·

#### ğŸ“š æ–‡æ¡£æ›´æ–°

- ğŸ“– å…¨æ–°çš„é¡¹ç›®æ–‡æ¡£ç»“æ„
- ğŸ¯ è¯¦ç»†çš„å¿«é€Ÿå¼€å§‹æŒ‡å—
- ğŸ“Š å®Œæ•´çš„ API å‚è€ƒæ–‡æ¡£
- ğŸ¨ ä¸°å¯Œçš„ä½¿ç”¨ç¤ºä¾‹
- ğŸ”§ è¯¦ç»†çš„æ•…éšœæ’é™¤æŒ‡å—

#### ğŸ”§ å¼€å‘å·¥å…·

**æ–°å¢è„šæœ¬**
```bash
# æ„å»ºè„šæœ¬
npm run build              # æ„å»ºæ‰€æœ‰åŒ…
npm run build:core         # æ„å»ºæ ¸å¿ƒåŒ…
npm run build:server       # æ„å»ºæœåŠ¡å™¨åŒ…
npm run build:client       # æ„å»ºå®¢æˆ·ç«¯åŒ…
npm run build:shared       # æ„å»ºå…±äº«åŒ…

# æ•°æ®åº“è„šæœ¬
npm run db:setup           # ä¸€é”®æ•°æ®åº“è®¾ç½®
npm run db:password        # è®¾ç½®æ•°æ®åº“å¯†ç 
npm run db:test            # æµ‹è¯•æ•°æ®åº“è¿æ¥
npm run db:disconnect      # ç®¡ç†æ•°æ®åº“è¿æ¥
npm run db:service         # PostgreSQL æœåŠ¡ç®¡ç†
npm run db:create          # åˆ›å»ºæ•°æ®åº“
npm run db:drop            # åˆ é™¤æ•°æ®åº“
npm run db:migrate         # è¿è¡Œè¿ç§»
npm run db:reset           # é‡ç½®æ•°æ®åº“

# å¼€å‘è„šæœ¬
npm run dev                # å¯åŠ¨æ‰€æœ‰å¼€å‘æœåŠ¡
npm run dev:server         # å¯åŠ¨æœåŠ¡å™¨
npm run dev:client         # å¯åŠ¨å®¢æˆ·ç«¯
npm run dev:docs           # å¯åŠ¨æ–‡æ¡£ç«™ç‚¹

# è´¨é‡ä¿è¯
npm run test               # è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:coverage      # æµ‹è¯•è¦†ç›–ç‡
npm run lint               # ä»£ç æ£€æŸ¥
npm run lint:fix           # è‡ªåŠ¨ä¿®å¤ä»£ç é£æ ¼
```

#### ğŸƒâ€â™‚ï¸ è¿ç§»æŒ‡å—

**ä» v1.x å‡çº§åˆ° v2.0**

1. **å®‰è£…æ–°ç‰ˆæœ¬**
   ```bash
   npm install @koa-html-template/core@^2.0.0
   ```

2. **æ›´æ–°å¯¼å…¥è¯­å¥**
   ```typescript
   // v1.x
   import koaHtmlTemplate from 'koa-html-template'
   
   // v2.0
   import koaHtmlTemplate from '@koa-html-template/core'
   ```

3. **æ•°æ®åº“è®¾ç½®ï¼ˆå¯é€‰ï¼‰**
   ```bash
   # å¦‚æœéœ€è¦ä½¿ç”¨æœåŠ¡å™¨åŒ…
   npm install @koa-html-template/server
   cd node_modules/@koa-html-template/server
   npm run db:setup
   ```

#### âš ï¸ ç ´åæ€§å˜æ›´

- ğŸ“¦ åŒ…åä» `koa-html-template` æ›´æ”¹ä¸º `@koa-html-template/core`
- ğŸ—ï¸ é¡¹ç›®ç»“æ„å®Œå…¨é‡æ„ä¸º monorepo
- ğŸ“ æŸäº›å†…éƒ¨ API æ¥å£æœ‰å˜åŒ–
- ğŸ”§ é…ç½®é€‰é¡¹å’Œé»˜è®¤å€¼å¯èƒ½æœ‰è°ƒæ•´

#### ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰å¯¹ v2.0 å¼€å‘åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

---

## [1.x.x] - å†å²ç‰ˆæœ¬

è¯¦è§ [v1.x åˆ†æ”¯](https://github.com/dingxihu/koa-html-template/tree/v1.x) çš„æ›´æ–°è®°å½•ã€‚ 