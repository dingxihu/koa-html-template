# åŒ…çŠ¶æ€æ€»ç»“

## ğŸ‰ å®ŒæˆçŠ¶æ€

### âœ… å·²å®Œæˆçš„åŒ…

#### 1. @koa-html-template/core
- **çŠ¶æ€**: âœ… å®Œæˆ
- **åŠŸèƒ½**: æ ¸å¿ƒæ¨¡æ¿å¼•æ“
- **ç‰¹æ€§**: 
  - å®Œæ•´çš„æ¨¡æ¿è¯­æ³•æ”¯æŒï¼ˆå˜é‡ã€æ¡ä»¶ã€å¾ªç¯ã€åŒ…å«ï¼‰
  - é«˜æ€§èƒ½ç¼“å­˜ç³»ç»Ÿ
  - TypeScript ç±»å‹å®šä¹‰
  - é”™è¯¯å¤„ç†å’Œè°ƒè¯•
  - HTML è‡ªåŠ¨è½¬ä¹‰

#### 2. @koa-html-template/server
- **çŠ¶æ€**: âœ… å®Œæˆ
- **åŠŸèƒ½**: Koa æœåŠ¡å™¨åº”ç”¨
- **ç‰¹æ€§**:
  - RESTful API æ¨¡æ¿ç®¡ç†
  - PostgreSQL æ•°æ®åº“é›†æˆ
  - æ•°æ®åº“è¿ç§»ç³»ç»Ÿ
  - æ¨¡æ¿æ¸²æŸ“å†å²è®°å½•
  - å®Œæ•´çš„æ•°æ®åº“ç®¡ç†å·¥å…·
  - äº¤äº’å¼å¯†ç è®¾ç½®
  - æ•°æ®åº“è¿æ¥ç›‘æ§

#### 3. @koa-html-template/client
- **çŠ¶æ€**: âœ… å®Œæˆ
- **åŠŸèƒ½**: React å®¢æˆ·ç«¯ç»„ä»¶åº“
- **ç‰¹æ€§**:
  - React 18 + TypeScript æ”¯æŒ
  - Ant Design 5 ç°ä»£åŒ– UI
  - å®Œæ•´çš„ç»„ä»¶åº“ï¼ˆæ¸²æŸ“å™¨ã€ç¼–è¾‘å™¨ã€åˆ—è¡¨ã€è¡¨å•ï¼‰
  - React Hooks çŠ¶æ€ç®¡ç†
  - å®¢æˆ·ç«¯æ¨¡æ¿é¢„è§ˆ
  - æœåŠ¡ç«¯æ¸²æŸ“æ”¯æŒ
  - å“åº”å¼è®¾è®¡
  - ç»„ä»¶æµ‹è¯•è¦†ç›–
  - Storybook æ–‡æ¡£

#### 4. @koa-html-template/shared
- **çŠ¶æ€**: âœ… å®Œæˆ
- **åŠŸèƒ½**: å…±äº«ç±»å‹å’Œå·¥å…·
- **ç‰¹æ€§**:
  - ç»Ÿä¸€çš„ç±»å‹ç³»ç»Ÿ
  - é€šç”¨å·¥å…·å‡½æ•°
  - API å“åº”ç»“æ„
  - é”™è¯¯ä»£ç å®šä¹‰

#### 5. @koa-html-template/docs
- **çŠ¶æ€**: âœ… å®Œæˆ
- **åŠŸèƒ½**: æ–‡æ¡£ç«™ç‚¹
- **ç‰¹æ€§**:
  - å®Œæ•´çš„ä½¿ç”¨æŒ‡å—
  - API å‚è€ƒæ–‡æ¡£
  - å®ç”¨ç¤ºä¾‹é›†åˆ
  - æœç´¢åŠŸèƒ½

## ğŸš€ å¼€å‘ç¯å¢ƒ

### å¯åŠ¨å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
npm install

# æ„å»ºæ‰€æœ‰åŒ…
npm run build

# å¼€å‘æ¨¡å¼ï¼ˆåŒæ—¶å¯åŠ¨æœåŠ¡å™¨ã€å®¢æˆ·ç«¯å’Œæ–‡æ¡£ï¼‰
npm run dev

# å•ç‹¬å¯åŠ¨æœåŠ¡
npm run dev:server    # å¯åŠ¨æœåŠ¡å™¨ï¼ˆç«¯å£ 3000ï¼‰
npm run dev:client    # å¯åŠ¨å®¢æˆ·ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆç«¯å£ 3001ï¼‰
npm run dev:docs      # å¯åŠ¨æ–‡æ¡£ç«™ç‚¹ï¼ˆç«¯å£ 5173ï¼‰
```

### è®¿é—®åœ°å€

- **æœåŠ¡å™¨ API**: http://localhost:3000
- **å®¢æˆ·ç«¯åº”ç”¨**: http://localhost:3001
- **æ–‡æ¡£ç«™ç‚¹**: http://localhost:5173
- **Storybook**: http://localhost:6006

## ğŸ“¦ åŒ…åŠŸèƒ½è¯¦æƒ…

### å®¢æˆ·ç«¯åŒ… (@koa-html-template/client)

#### ç»„ä»¶
- **TemplateRenderer**: æ¨¡æ¿æ¸²æŸ“ç»„ä»¶ï¼Œæ”¯æŒå®¢æˆ·ç«¯é¢„è§ˆå’ŒæœåŠ¡ç«¯æ¸²æŸ“
- **TemplateList**: æ¨¡æ¿åˆ—è¡¨ç»„ä»¶ï¼Œå±•ç¤ºå’Œç®¡ç†æ¨¡æ¿
- **TemplateEditor**: æ¨¡æ¿ç¼–è¾‘å™¨ç»„ä»¶ï¼Œç”¨äºåˆ›å»ºå’Œç¼–è¾‘æ¨¡æ¿
- **TemplateForm**: æ¨¡æ¿è¡¨å•ç»„ä»¶ï¼Œæä¾›è¡¨å•è¾“å…¥åŠŸèƒ½

#### Hooks
- **useTemplate**: ç®¡ç†å•ä¸ªæ¨¡æ¿çš„çŠ¶æ€å’Œæ“ä½œ
- **useTemplateList**: ç®¡ç†æ¨¡æ¿åˆ—è¡¨çš„çŠ¶æ€å’Œæ“ä½œ
- **useTemplateRenderer**: ç®¡ç†æ¨¡æ¿æ¸²æŸ“çš„çŠ¶æ€å’Œæ“ä½œ

#### å·¥å…·
- **templateRenderer**: å®¢æˆ·ç«¯æ¨¡æ¿æ¸²æŸ“å·¥å…·
- **templateApi**: API å®¢æˆ·ç«¯æœåŠ¡

### æœåŠ¡å™¨åŒ… (@koa-html-template/server)

#### API ç«¯ç‚¹
- `GET /api/templates` - è·å–æ‰€æœ‰æ¨¡æ¿
- `GET /api/templates/:id` - æ ¹æ®IDè·å–æ¨¡æ¿
- `POST /api/templates` - åˆ›å»ºæ–°æ¨¡æ¿
- `PUT /api/templates/:id` - æ›´æ–°æ¨¡æ¿
- `DELETE /api/templates/:id` - åˆ é™¤æ¨¡æ¿
- `POST /api/templates/:id/render` - æ ¹æ®IDæ¸²æŸ“æ¨¡æ¿
- `POST /api/templates/render/:name` - æ ¹æ®åç§°æ¸²æŸ“æ¨¡æ¿
- `GET /api/templates/:id/renders` - è·å–æ¨¡æ¿æ¸²æŸ“å†å²
- `GET /api/templates/stats/overview` - è·å–ç»Ÿè®¡ä¿¡æ¯
- `GET /health` - å¥åº·æ£€æŸ¥

#### æ•°æ®åº“ç®¡ç†
- `npm run db:setup` - ä¸€é”®è®¾ç½®æ•°æ®åº“
- `npm run db:password` - è®¾ç½®æ•°æ®åº“å¯†ç 
- `npm run db:test` - æµ‹è¯•è¿æ¥
- `npm run db:create` - åˆ›å»ºæ•°æ®åº“
- `npm run db:migrate` - è¿è¡Œè¿ç§»
- `npm run db:reset` - é‡ç½®æ•°æ®åº“

## ğŸ¯ æ¨¡æ¿è¯­æ³•

### å˜é‡æ›¿æ¢
```html
<!-- åŸºç¡€å˜é‡ -->
<h1>{{title}}</h1>

<!-- åµŒå¥—å±æ€§ -->
<p>{{user.name}} - {{user.age}}å²</p>

<!-- ä¸è½¬ä¹‰HTML -->
<div>{{{htmlContent}}}</div>
```

### æ¡ä»¶æ¸²æŸ“
```html
{if user.isAdmin}
  <button>ç®¡ç†å‘˜é¢æ¿</button>
{/if}

{if !user.isActive}
  <div class="warning">è´¦æˆ·å·²ç¦ç”¨</div>
{/if}
```

### å¾ªç¯æ¸²æŸ“
```html
<!-- æ•°ç»„å¾ªç¯ -->
{for users}
  <li>{{$value.name}} - {{$index}}</li>
{else}
  <li>æš‚æ— ç”¨æˆ·</li>
{/for}

<!-- å¯¹è±¡å¾ªç¯ -->
{for settings}
  <tr>
    <td>{{$key}}</td>
    <td>{{$value}}</td>
  </tr>
{/for}
```

### æ³¨é‡Š
```html
{# è¿™æ˜¯æ¨¡æ¿æ³¨é‡Šï¼Œä¸ä¼šåœ¨è¾“å‡ºä¸­æ˜¾ç¤º #}
```

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test

# è¿è¡Œç‰¹å®šåŒ…çš„æµ‹è¯•
npm run test --workspace=packages/core
npm run test --workspace=packages/server
npm run test --workspace=packages/client

# ç›‘å¬æ¨¡å¼
npm run test:watch

# æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage
```

## ğŸ“š æ–‡æ¡£

- **é¡¹ç›® README**: [README.md](./README.md)
- **å®¢æˆ·ç«¯æ–‡æ¡£**: [packages/client/README.md](./packages/client/README.md)
- **å®¢æˆ·ç«¯ä½¿ç”¨æŒ‡å—**: [packages/client/USAGE.md](./packages/client/USAGE.md)
- **åœ¨çº¿æ–‡æ¡£**: http://localhost:5173 (å¼€å‘æ¨¡å¼)

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å®¢æˆ·ç«¯ä¾èµ–é—®é¢˜**
   ```bash
   cd packages/client
   npm install
   npm run dev
   ```

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   ```bash
   cd packages/server
   npm run db:setup
   npm run db:test
   ```

3. **æ„å»ºå¤±è´¥**
   ```bash
   npm run clean:all
   npm install
   npm run build
   ```

## ğŸ‰ æ€»ç»“

æ‰€æœ‰åŒ…éƒ½å·²ç»å®Œæˆå¹¶å¯ä»¥æ­£å¸¸å·¥ä½œï¼š

1. âœ… **æ ¸å¿ƒåŒ…**: æä¾›å®Œæ•´çš„æ¨¡æ¿å¼•æ“åŠŸèƒ½
2. âœ… **æœåŠ¡å™¨åŒ…**: æä¾› RESTful API å’Œæ•°æ®åº“ç®¡ç†
3. âœ… **å®¢æˆ·ç«¯åŒ…**: æä¾› React ç»„ä»¶åº“å’Œç°ä»£åŒ– UI
4. âœ… **å…±äº«åŒ…**: æä¾›ç»Ÿä¸€çš„ç±»å‹å®šä¹‰
5. âœ… **æ–‡æ¡£åŒ…**: æä¾›å®Œæ•´çš„ä½¿ç”¨æ–‡æ¡£

é¡¹ç›®ç°åœ¨æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ Monorepoï¼Œæ”¯æŒï¼š
- æ¨¡æ¿çš„åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤å’Œæ¸²æŸ“
- å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ¸²æŸ“
- æ•°æ®åº“ç®¡ç†å’Œå†å²è®°å½•
- ç°ä»£åŒ–çš„ React ç»„ä»¶åº“
- å®Œæ•´çš„æ–‡æ¡£å’Œæµ‹è¯•è¦†ç›–

å¯ä»¥å¼€å§‹ä½¿ç”¨å’Œè¿›ä¸€æ­¥å¼€å‘äº†ï¼ğŸš€ 